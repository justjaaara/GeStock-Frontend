<div class="settings-section">
    <div class="section-header">
        <h2>Seguridad y Privacidad</h2>
        <p>Administra la seguridad de tu cuenta y configuraciones de privacidad</p>
    </div>

    <div class="security-options">
        <div class="security-card">
            <div class="card-header">
                <div class="card-icon">
                    <span class="icon">üîí</span>
                </div>
                <div class="card-info">
                    <h3>Contrase√±a</h3>
                    <p>Cambia tu contrase√±a regularmente para mantener tu cuenta segura</p>
                </div>
            </div>
            <div class="card-actions">
                <button class="btn btn-primary" (click)="openPasswordModal()">
                    <span class="btn-icon">üîë</span>
                    <span>Cambiar Contrase√±a</span>
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Modal de Cambio de Contrase√±a -->
@if (showPasswordModal()) {
<div class="modal-overlay" (click)="closePasswordModal()">
    <div class="password-modal" (click)="$event.stopPropagation()">
        <div class="modal-header">
            <h3>Cambiar Contrase√±a</h3>
            <p>Ingresa tu contrase√±a actual y la nueva contrase√±a</p>
        </div>

        @if (isPasswordChanged()) {
        <div class="alert alert-success">
            <span class="alert-icon">‚úÖ</span>
            <span>Contrase√±a cambiada exitosamente</span>
        </div>
        }

        <form [formGroup]="passwordForm" (ngSubmit)="onPasswordSubmit()" class="password-form">
            <div class="form-group">
                <label for="currentPassword">Contrase√±a Actual *</label>
                <input id="currentPassword" type="password" class="input-field"
                    placeholder="Ingresa tu contrase√±a actual" formControlName="currentPassword" />
                @if (getFieldError('currentPassword')) {
                <span class="error-message">{{ getFieldError('currentPassword') }}</span>
                }
            </div>

            <div class="form-group">
                <label for="newPassword">Nueva Contrase√±a *</label>
                <input id="newPassword" type="password" class="input-field" placeholder="Ingresa tu nueva contrase√±a"
                    formControlName="newPassword" />
                @if (getFieldError('newPassword')) {
                <span class="error-message">{{ getFieldError('newPassword') }}</span>
                }
                <small class="form-hint">M√≠nimo 6 caracteres, incluir al menos un n√∫mero y un car√°cter especial</small>
            </div>

            <div class="form-group">
                <label for="confirmPassword">Confirmar Contrase√±a *</label>
                <input id="confirmPassword" type="password" class="input-field"
                    placeholder="Confirma tu nueva contrase√±a" formControlName="confirmPassword" />
                @if (getFieldError('confirmPassword')) {
                <span class="error-message">{{ getFieldError('confirmPassword') }}</span>
                }
            </div>

            @if (errorMessage()) {
            <div class="error-message" style="margin-bottom: 1rem; padding: 0.75rem; background-color: #fee; border: 1px solid #fcc; border-radius: 4px; color: #c33;">
                {{ errorMessage() }}
            </div>
            }

            <div class="modal-actions">
                <button type="button" class="btn btn-secondary" (click)="closePasswordModal()" [disabled]="isLoading()">
                    Cancelar
                </button>
                <button type="submit" class="btn btn-primary" [disabled]="!passwordForm.valid || isLoading()">
                    @if (isLoading()) {
                    <span class="btn-icon spinner">‚è≥</span>
                    <span>Cambiando...</span>
                    } @else {
                    <span class="btn-icon">üíæ</span>
                    <span>Cambiar Contrase√±a</span>
                    }
                </button>
            </div>
        </form>
    </div>
</div>
}